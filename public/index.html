<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Get YouTube Subs</title>
</head>
<body style="background-color: rgb(211, 209, 209); display: flex; flex-direction:column; width : 30%; justify-content: center ; height: 100vh; align-items: center; margin: auto; gap: 2rem;">
    <!-- code for the container -->
    <div style="border:  1px solid black; background-color: whitesmoke; padding : 20px; display: flex ; flex-direction: column; gap: 1rem;">
        <!-- Get all subs button -->
    <button style="border:none; border-radius : 10px;font-size: 17px; background-color: rgb(10, 10, 62); color: aliceblue; width: 100%; padding: 15px; cursor: pointer;" onclick="getSubscribers('/subscribers')">Get all subscribers</button>
        <!-- Get subs name and channel button -->
    <button style=" border:none; border-radius : 10px;font-size: 17px; background-color: rgb(10, 10, 62); color: aliceblue;width: 100%; padding: 15px; cursor: pointer" onclick="getSubscribers('/subscribers/names')">Get subscriber names and subscribed channels</button>
    <label style="font-size: 20px; font-weight : 700;" for="userId">Enter subscriber id:</label>
        <!-- taking input id from the subscriber -->
    <input style="padding: 15px;" type="text" id="subscriberId" placeholder="Subscriber ID">
        <!-- Get sub with given id button -->
    <button style="border:none; border-radius : 10px;font-size: 17px; background-color: rgb(10, 10, 62); color: aliceblue;width: 100%; padding: 15px; cursor: pointer" onclick="getSubscriberWithId()">Get subscriber with given Id</button>
</div>

    <script>

         // function to get a list of all subscribers by endpoint
        async function getSubscribers(endpoint) {
            // try and catch block
            try {
                const response = await fetch(endpoint);
                const data = await response.json();
                
                if(response.ok){
                    console.log(data)
                    window.location.href = endpoint
                }else{
                    console.error("Error calling api:", data.message)
                }
            } catch (error) {
                console.error('Error calling API:', error);
            }
        }

        // function to get subscribers' info by id
        async function getSubscriberWithId() {
           const subscriberId = document.getElementById('subscriberId').value;

           if(subscriberId === ""){
            alert("Fill the subsciber id!")
           }else{
               // try and catch block
            try {
               const response = await fetch(`/subscribers/${subscriberId}`);
               const data = await response.json();

                console.log(data);
                window.location.href = `/subscribers/${subscriberId}`;
               
           } catch (error) {
               console.error('Error calling API Endpoint 3:', error);
           }
           }


       }
    </script>
</body>
</html>
